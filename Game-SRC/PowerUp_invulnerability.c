#include "Geral.h"

#define INVULNERABILITY_TIME 3

bool invulnerable = False;
float increment = 0.01;//Valor da velocidade em que o player altera sua opacidade

void transparentColoring(int i);

void invulnerability(){    
    invulnerable = True;    
    increment = 0.01;
    glutTimerFunc(TICK_MSEC,transparentColoring,0);
    setAlarm(endInvulnerability, INVULNERABILITY_TIME);
}

void transparentColoring(int i){//Faz o player ficar piscando    
    if (invulnerable == False){
        return;
    }
    if(player.color[3] >= 1){
        increment *= (-1);
    }
    if(player.color[3] <= 0.25){
        increment *= (-1);
    }
    player.color[3] += increment;    
    glutTimerFunc(TICK_MSEC,transparentColoring,0);
}

void endInvulnerability(){
    invulnerable = False;
    player.color[3] = 1;
}